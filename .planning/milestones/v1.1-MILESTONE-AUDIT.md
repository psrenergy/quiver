---
milestone: v1.1
audited: 2026-02-19T23:30:00Z
status: gaps_found
scores:
  requirements: 6/13
  phases: 1/4
  integration: 3/5
  flows: 2/4
gaps:
  requirements:
    - id: "BIND-01"
      status: "unsatisfied"
      phase: "Phase 12"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 12 not started. No phase directory, plans, or verification exist."
    - id: "BIND-02"
      status: "unsatisfied"
      phase: "Phase 12"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 12 not started. No phase directory, plans, or verification exist."
    - id: "BIND-03"
      status: "unsatisfied"
      phase: "Phase 13"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 13 not started. No phase directory, plans, or verification exist."
    - id: "BIND-04"
      status: "unsatisfied"
      phase: "Phase 13"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 13 not started. No phase directory, plans, or verification exist."
    - id: "BIND-05"
      status: "unsatisfied"
      phase: "Phase 14"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 14 not started. No phase directory, plans, or verification exist."
    - id: "MIGR-02"
      status: "unsatisfied"
      phase: "Phase 14"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 14 not started. Julia and Dart FFI layers still declare old single-column signatures -- existing time series tests in these bindings are broken by Phase 11 ABI change."
    - id: "MIGR-03"
      status: "unsatisfied"
      phase: "Phase 14"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 14 not started. Old single-column C API signatures were already removed in Phase 11 (replaced with multi-column). MIGR-03 specifies old functions should remain until all bindings migrate. Needs clarification -- may be moot if generators are re-run immediately in Phase 12/13."
  integration:
    - "Julia FFI (c_api.jl) declares old 7-param time series signatures; C library exports new 9-param signatures -- ABI mismatch causes undefined behavior at runtime"
    - "Dart FFI (bindings.dart) declares old 7-param time series signatures; same ABI mismatch -- segfault or silent corruption at runtime"
    - "Binding generators (julia/generator/generator.bat, dart/generator/generator.bat) have not been re-run after Phase 11 header changes"
  flows:
    - "Julia time series update/read round-trip: BROKEN at FFI call -- 7-param layout vs 9-param C export"
    - "Dart time series update/read round-trip: BROKEN at FFI call -- 7-param layout vs 9-param C export"
tech_debt: []
---

# v1.1 Milestone Audit: Time Series Ergonomics

**Audited:** 2026-02-19
**Status:** gaps_found
**Score:** 6/13 requirements satisfied

## Milestone Definition of Done

> Make `update_time_series_group` and `read_time_series_group` support N typed value columns across all layers, matching `create_element`'s columnar interface pattern.

## Phase Summary

| Phase | Name | Status | Verified | Score |
|-------|------|--------|----------|-------|
| 11 | C API Multi-Column Time Series | Complete | PASSED | 5/5 |
| 12 | Julia Binding Migration | Not Started | MISSING | - |
| 13 | Dart Binding Migration | Not Started | MISSING | - |
| 14 | Verification and Cleanup | Not Started | MISSING | - |

**Phase Score:** 1/4 verified

## Requirements Coverage (3-Source Cross-Reference)

### Source Availability

| Source | Available | Notes |
|--------|-----------|-------|
| VERIFICATION.md | Phase 11 only | Phases 12-14 have no VERIFICATION.md |
| SUMMARY.md frontmatter | Phase 11 only | No `requirements-completed` field in frontmatter |
| REQUIREMENTS.md traceability | All 13 REQs | Checkbox status available for all |

### Requirement Status Matrix

| REQ-ID | Description | Phase | REQUIREMENTS.md | VERIFICATION.md | SUMMARY | Final Status |
|--------|-------------|-------|-----------------|-----------------|---------|--------------|
| CAPI-01 | N typed value columns for time series update | 11 | [x] | SATISFIED | provides multi-column signatures | **satisfied** |
| CAPI-02 | N typed value columns for time series read | 11 | [x] | SATISFIED | provides multi-column signatures | **satisfied** |
| CAPI-03 | Free function for variable-column results | 11 | [x] | SATISFIED | provides type-aware deallocation | **satisfied** |
| CAPI-04 | Column types use existing quiver_data_type_t | 11 | [x] | SATISFIED | no new types added | **satisfied** |
| CAPI-05 | Schema validation with clear error messages | 11 | [x] | SATISFIED | provides schema validation | **satisfied** |
| BIND-01 | Julia kwargs update interface | 12 | [ ] | MISSING | N/A | **unsatisfied** |
| BIND-02 | Julia multi-column read | 12 | [ ] | MISSING | N/A | **unsatisfied** |
| BIND-03 | Dart Map update interface | 13 | [ ] | MISSING | N/A | **unsatisfied** |
| BIND-04 | Dart multi-column read | 13 | [ ] | MISSING | N/A | **unsatisfied** |
| BIND-05 | Lua multi-column test coverage | 14 | [ ] | MISSING | N/A | **unsatisfied** |
| MIGR-01 | Mixed-type test schema | 11 | [x] | SATISFIED | provides mixed_time_series.sql | **satisfied** |
| MIGR-02 | All 1,213+ tests continue passing | 14 | [ ] | MISSING | N/A | **unsatisfied** |
| MIGR-03 | Old C API removed only after migration | 14 | [ ] | MISSING | N/A | **unsatisfied** |

### Orphaned Requirements

None. All 13 v1.1 requirements are assigned to phases in the traceability table.

## Integration Check Results

### Wired (Working)

| From | To | Via | Status |
|------|-----|-----|--------|
| `include/quiver/c/database.h` | `src/c/database_time_series.cpp` | Multi-column function signatures | WIRED |
| `src/c/database_time_series.cpp` | `include/quiver/attribute_metadata.h` | `get_time_series_metadata` validation | WIRED |
| `src/c/database_time_series.cpp` | `src/c/database_helpers.h` | `to_c_data_type` type conversion | WIRED |
| C API tests | `include/quiver/c/database.h` | New multi-column signatures used in 9 tests | WIRED |
| C API tests | `tests/schemas/valid/mixed_time_series.sql` | Mixed schema used across 8 test cases | WIRED |

### Broken (ABI Mismatch)

| From | To | Issue | Affected REQs |
|------|-----|-------|---------------|
| `bindings/julia/src/c_api.jl` (lines 312-322) | `libquiver_c` | Old 7-param FFI vs new 9-param C export | BIND-01, BIND-02, MIGR-02 |
| `bindings/dart/lib/src/ffi/bindings.dart` (lines 1886-1997) | `libquiver_c` | Old 7-param FFI vs new 9-param C export | BIND-03, BIND-04, MIGR-02 |
| Julia `database_read.jl` / `database_update.jl` | Old single-column semantics | Wrappers hardcode `date_time` + `value` columns | BIND-01, BIND-02 |
| Dart `database_read.dart` / `database_update.dart` | Old single-column semantics | Wrappers allocate old-shape buffers | BIND-03, BIND-04 |

### E2E Flow Status

| Flow | Status | Break Point |
|------|--------|-------------|
| C++ core -> C API -> C API tests (update round-trip) | COMPLETE | N/A |
| C++ core -> C API -> C API tests (read round-trip) | COMPLETE | N/A |
| Julia -> C API (time series update/read) | BROKEN | FFI call -- ABI mismatch at `c_api.jl` |
| Dart -> C API (time series update/read) | BROKEN | FFI call -- ABI mismatch at `bindings.dart` |

## MIGR-03 Concern

Phase 11 replaced the old single-column C API signatures with new multi-column ones immediately. MIGR-03 specifies "Old C API functions removed only after all bindings migrated." The old symbols no longer exist in the C library, but bindings still reference them by name (same symbol, different parameter layout). This creates an ABI mismatch rather than a missing symbol error.

**Resolution options:**
1. Re-run binding generators immediately (Phase 12/13 first step) to align FFI declarations
2. Accept that MIGR-03's intent was about symbol removal, not signature change -- the function names are preserved, only the parameter layout changed

## Pre-Phase-12 Actions Required

1. **Re-run Julia binding generator** (`bindings/julia/generator/generator.bat`) to update `c_api.jl` with new 9-param signatures
2. **Re-run Dart binding generator** (`bindings/dart/generator/generator.bat`) to update `bindings.dart` with new 9/9/5-param signatures
3. **Clarify MIGR-03 intent** -- old C API symbols were replaced (same name, new signature), not retained alongside new ones

## v1.0 Phase Verification Summary (Shipped 2026-02-11)

All 10 v1.0 phases passed verification. Included for completeness:

| Phase | Status | Score |
|-------|--------|-------|
| 01 - C++ Impl Header Extraction | passed | 5/5 |
| 02 - C++ Core File Decomposition | passed | 5/5 |
| 03 - C++ Naming and Error Standardization | passed | 10/10 |
| 04 - C API File Decomposition | passed | 5/5 |
| 05 - C API Naming and Error Standardization | passed | 4/4 |
| 06 - Julia Bindings Standardization | passed | 5/5 |
| 07 - Dart Bindings Standardization | passed | 6/6 |
| 08 - Lua Bindings Standardization | passed | 3/3 |
| 09 - Code Hygiene | passed | 7/7 |
| 10 - Cross-Layer Docs and Final Verification | passed | 6/6 |

---

*Audited: 2026-02-19T23:30:00Z*
*Auditor: Claude (gsd audit-milestone)*
